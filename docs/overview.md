# 项目概览

## 目标

- 做一个网页游戏原型：前端展示 + 服务端存档/结算 + 共享战斗引擎。
- 战斗核心复刻点：**25 人队伍、技能概率叠加、站位决定技能优先级、seed 可复现**。
- 后续再扩展到“推图/挂机/掉落/挖矿”等系统。

## 非目标（当前阶段不做）

- 复杂的实时联机（WebSocket 实时对战）。
- 复杂的反作弊（先保证服务端裁决 + 可回放）。
- 完整经济系统与内容产出（先打通玩法骨架）。

## 里程碑（建议）

1. M0：共享战斗引擎（确定性、日志、回放）完成。
2. M1：服务端 API：账号、存档、战斗模拟（服务端裁决）。
3. M2：网页前端：编辑 25 人队伍 + 一键模拟 + 展示战斗日志。
4. M3：推图挂机（最小地图 + 掉落表 + 离线收益）。
5. M4：挖矿（格子地图 + 镐子耐久 + 魔像事件 + 工坊离线工程）。
6. M5：PVP（异步匹配/排行；服务端重算与回放校验）。

## 代码结构

- `packages/engine/`：纯逻辑（无网络、无数据库），供 `apps/api` 与 `apps/web` 复用。
- `apps/api/`：服务端（建议：Fastify + SQLite/PG + JWT）。
- `apps/web/`：前端（建议：Vite + React/Vue；纯调用 API）。

## 关键原则

- **服务端权威**：战斗结果必须以服务端计算为准；客户端只负责展示与请求。
- **确定性**：战斗使用 seed RNG；相同输入必得相同输出，用于回放与审计。
- **可审计日志**：每次战斗保存输入快照（双方队伍/属性/seed）与输出日志摘要。

## 文档索引

- 战斗规格：`docs/battle-spec.md`
- API 规格：`docs/api-spec.md`
- 数据模型：`docs/data-model.md`
- 架构说明：`docs/architecture.md`

